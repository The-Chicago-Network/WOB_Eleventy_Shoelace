{"version":3,"sources":["../../../src/trees/radix/node.ts"],"sourcesContent":["import type { Nullable } from \"../../types/index.js\";\nimport { uniqueId } from \"../../utils.js\";\n\nexport interface RadixNode {\n  id: string;\n  key: string;\n  subWord: string;\n  parent: Nullable<string>;\n  children: Record<string, RadixNode>;\n  docs: string[];\n  end: boolean;\n  word: string;\n}\n\nexport function create(end = false, subWord = \"\", key = \"\"): RadixNode {\n  const node = {\n    id: uniqueId(),\n    key,\n    subWord,\n    parent: null,\n    children: {},\n    docs: [],\n    end,\n    word: \"\",\n  };\n\n  Object.defineProperty(node, \"toJSON\", { value: serialize });\n  return node;\n}\n\nexport function updateParent(node: RadixNode, parent: RadixNode): void {\n  node.parent = parent.id;\n  node.word = parent.word + node.subWord;\n}\n\nexport function addDocument(node: RadixNode, docID: string): void {\n  node.docs.push(docID);\n}\n\nexport function removeDocument(node: RadixNode, docID: string): boolean {\n  const index = node.docs.indexOf(docID);\n\n  /* c8 ignore next 3 */\n  if (index === -1) {\n    return false;\n  }\n\n  node.docs.splice(index, 1);\n\n  return true;\n}\n\n/* c8 ignore next 5 */\nfunction serialize(this: RadixNode): object {\n  const { word, subWord, children, docs, end } = this;\n\n  return { word, subWord, children, docs, end };\n}\n"],"names":["uniqueId","create","end","subWord","key","node","id","parent","children","docs","word","Object","defineProperty","value","serialize","updateParent","addDocument","docID","push","removeDocument","index","indexOf","splice"],"mappings":"AACA,SAASA,QAAQ,QAAQ,iBAAiB;AAa1C,OAAO,SAASC,OAAOC,MAAM,KAAK,EAAEC,UAAU,EAAE,EAAEC,MAAM,EAAE,EAAa;IACrE,MAAMC,OAAO;QACXC,IAAIN;QACJI;QACAD;QACAI,QAAQ,IAAI;QACZC,UAAU,CAAC;QACXC,MAAM,EAAE;QACRP;QACAQ,MAAM;IACR;IAEAC,OAAOC,cAAc,CAACP,MAAM,UAAU;QAAEQ,OAAOC;IAAU;IACzD,OAAOT;AACT,CAAC;AAED,OAAO,SAASU,aAAaV,IAAe,EAAEE,MAAiB,EAAQ;IACrEF,KAAKE,MAAM,GAAGA,OAAOD,EAAE;IACvBD,KAAKK,IAAI,GAAGH,OAAOG,IAAI,GAAGL,KAAKF,OAAO;AACxC,CAAC;AAED,OAAO,SAASa,YAAYX,IAAe,EAAEY,KAAa,EAAQ;IAChEZ,KAAKI,IAAI,CAACS,IAAI,CAACD;AACjB,CAAC;AAED,OAAO,SAASE,eAAed,IAAe,EAAEY,KAAa,EAAW;IACtE,MAAMG,QAAQf,KAAKI,IAAI,CAACY,OAAO,CAACJ;IAEhC,oBAAoB,GACpB,IAAIG,UAAU,CAAC,GAAG;QAChB,OAAO,KAAK;IACd,CAAC;IAEDf,KAAKI,IAAI,CAACa,MAAM,CAACF,OAAO;IAExB,OAAO,IAAI;AACb,CAAC;AAED,oBAAoB,GACpB,SAASN,YAAmC;IAC1C,MAAM,EAAEJ,KAAI,EAAEP,QAAO,EAAEK,SAAQ,EAAEC,KAAI,EAAEP,IAAG,EAAE,GAAG,IAAI;IAEnD,OAAO;QAAEQ;QAAMP;QAASK;QAAUC;QAAMP;IAAI;AAC9C"}